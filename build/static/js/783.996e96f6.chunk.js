"use strict";(self.webpackChunkhrm=self.webpackChunkhrm||[]).push([[783],{9783:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Z});var r=a(2791),t=a(9434),l=a(5995),n=(a(9468),a(8478)),i=a(8116),c=a(3360),d=a(2591),x=a(5316),o=a(4688),h=a(4849),m=a(1087),j=a(7689),u=a(7770),p=a(4608),g=a(1462),v=a(5086),N=a(184);const Z=function(e){const s=(0,t.I0)(),a=e.jwt,Z=(0,r.useRef)(),f=(0,r.useRef)(),y=(0,r.useRef)(),b=(0,r.useRef)(),w=(0,r.useRef)(),k=(0,r.useRef)(),L=(0,r.useRef)(),[R,_]=(0,r.useState)(!1),[C,S]=(0,r.useState)(),[F,D]=(0,r.useState)(!1),[T,E]=(0,r.useState)(),[A,H]=(0,r.useState)(!1),q=(0,t.v9)((e=>e.leave));(0,r.useEffect)((()=>{s((0,l.go)({jwt:a}))}),[s,a]),(0,r.useEffect)((()=>{q.isError||(D(!1),s((0,l.oE)()))}),[q.isError,s]);let I=[];for(let r=1;r<=q.totalpages;r++)I.push((0,N.jsx)(i.Z.Item,{active:r===Number(q.currentpage),onClick:()=>B(r),children:r},r));const B=e=>{s((0,l.go)({jwt:a,pageno:e}))},G=(e,s)=>{H(!0),S(e),E(s)},P=()=>{H(!1)},[U,M]=(0,r.useState)(),[z,O]=(0,r.useState)(null),[Y,J]=(0,r.useState)(!1);return q.isFirstLoading?(0,N.jsx)(u.Z,{}):(0,N.jsxs)("div",{className:"page-section p-4",children:[(0,N.jsxs)("div",{className:"chart mt-4",children:[(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)("h4",{className:"mb-0",children:"Leave Requests"}),(0,N.jsx)(c.Z,{variant:"danger",onClick:()=>{D(!0)},children:"+ Apply Leave"})]}),(0,N.jsx)("div",{className:"row align-items-center justify-content-between mt-4"}),(0,N.jsx)("div",{className:"responsive mt-4",children:(0,N.jsxs)(d.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"text-white",children:"S.No."}),(0,N.jsx)("th",{className:"text-white",children:"Employee"}),(0,N.jsx)("th",{className:"text-white",children:"Leave\u2800Type"}),(0,N.jsx)("th",{className:"text-white",children:"Reason"}),(0,N.jsx)("th",{className:"text-white",children:"Leave\u2800Duration"}),(0,N.jsx)("th",{className:"text-white",children:"Days"}),(0,N.jsx)("th",{className:"text-white",children:"Applied\u2800On"}),(0,N.jsx)("th",{className:"text-white",children:"Status"})]})}),(0,N.jsx)("tbody",{children:q.isLoading?(0,N.jsx)("tr",{className:"text-center",children:(0,N.jsx)("td",{colSpan:8,children:"Loading..."})},0):q.allData.length>0?q.allData.map(((e,s)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:10*(q.currentpage-1)+(s+1)}),(0,N.jsx)("td",{children:(0,N.jsx)(m.rU,{to:"/leave-request/"+e.users._id,children:(0,N.jsxs)("div",{className:"d-flex",children:[(0,N.jsx)("img",{src:n,alt:"User",className:"img-fluid rounded-circle",style:{width:"40px",height:"40px"}}),(0,N.jsxs)("div",{className:"ms-3",children:[(0,N.jsx)("h6",{className:"mb-0 ",children:(0,N.jsx)(p.Z,{text:e.users?e.users.name:""})}),(0,N.jsx)("small",{className:"mb-0 text-muted",children:e.users?e.users.email:""})]})]})})}),(0,N.jsx)("td",{children:(0,N.jsx)(p.Z,{text:e.type.name})}),(0,N.jsx)("td",{children:(0,N.jsx)(g.Z,{text:e.reason,limit:20})}),(0,N.jsxs)("td",{children:[(0,N.jsx)(v.FU,{date_arg:e.start_date}),"\u2800To\u2800",(0,N.jsx)(v.FU,{date_arg:e.end_date})]}),(0,N.jsx)("td",{children:e.half_day?"Half Day":e.end_date&&e.start_date?(new Date(e.end_date).getTime()-new Date(e.start_date).getTime())/864e5+1:"N/A"}),(0,N.jsx)("td",{children:(0,N.jsx)(v.FU,{date_arg:e.created_at})}),(0,N.jsx)("td",{children:"pending"===e.status?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(c.Z,{className:"btn btn-success text-white",onClick:()=>G(e._id,!0),children:[" ","Approve"," "]}),(0,N.jsxs)(c.Z,{className:"btn btn-warning text-white ms-3",onClick:()=>G(e._id,!1),children:[" ","Reject"," "]})]}):(0,N.jsxs)("u",{className:"approved"===e.status?"text-success":"text-danger",onClick:()=>((e,s)=>{M(e),O(s),J(!0)})(e.remark,e.approved_by),children:[(0,N.jsx)(p.Z,{text:e.status})," "]})})]},s))):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:8,className:"text-center",children:"No Data Found"})},0)})]})}),(0,N.jsx)(i.Z,{children:I})]}),(0,N.jsxs)(x.Z,{show:F,onHide:()=>{D(!1),s((0,l.oE)())},children:[(0,N.jsx)(x.Z.Header,{closeButton:!0,children:(0,N.jsx)(x.Z.Title,{children:"Leave Apply"})}),(0,N.jsx)(x.Z.Body,{children:(0,N.jsxs)(o.Z,{onSubmit:async e=>{e.preventDefault(),await s((0,l.rg)({jwt:a,user_id:f.current.value,leave_type:y.current.value,start:b.current.value,end:w.current.value,reason:k.current.value,remark:L.current.value,halfday:R}))},children:[(0,N.jsxs)(o.Z.Group,{children:[(0,N.jsx)(o.Z.Label,{children:"Leave Type"}),(0,N.jsxs)(o.Z.Select,{"aria-label":"Default select example",ref:y,className:"form-control",required:!0,children:[(0,N.jsx)("option",{value:"",children:"Select"}),q.allLeaveType.length>0?q.allLeaveType.map(((e,s)=>!e.is_deleted&&(0,N.jsx)("option",{value:e._id,children:e.name},s))):""]}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"type"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-1"):"")):""})]}),(0,N.jsxs)(o.Z.Group,{children:[(0,N.jsx)(o.Z.Label,{children:"Employee"}),(0,N.jsxs)(o.Z.Select,{"aria-label":"Default select example",ref:f,className:"form-control",required:!0,children:[(0,N.jsx)("option",{value:"",children:"Select"}),q.alluser.length>0?q.alluser.map(((e,s)=>!e.is_deleted&&(0,N.jsxs)("option",{value:e._id,children:[e.name,"(",e.email,")"]},s))):""]}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"users"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-2"):"")):""})]}),(0,N.jsxs)(o.Z.Group,{className:"my-3",controlId:"exampleForm.ControlInput1",children:[(0,N.jsxs)(o.Z.Label,{children:["Duration",(0,N.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-contant-between",children:[(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)(o.Z.Control,{type:"date",ref:b,placeholder:"Start date",min:"2022-01-01",max:"3000-01-01",required:!0}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"start_date"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-3"):"")):""})]}),(0,N.jsx)("p",{className:"pt-2",children:"To"}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)(o.Z.Control,{type:"date",ref:w,placeholder:"end Date",min:"2022-01-01",max:"3000-01-01",required:!0}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"end_date"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-4"):"")):""})]})]})]}),(0,N.jsx)(o.Z.Group,{children:(0,N.jsx)("div",{className:"radio-btns mt-0",children:(0,N.jsx)("div",{className:"mb-3",children:(0,N.jsx)(o.Z.Check,{type:"checkbox",onChange:e=>{_(e.target.checked)},label:"Half Day"})},"default-checkbox")})}),(0,N.jsxs)(o.Z.Group,{className:"mb-0",controlId:"exampleForm.ControlTextarea1",children:[(0,N.jsx)(o.Z.Label,{children:"Leave Reason"}),(0,N.jsx)(o.Z.Control,{as:"textarea",ref:k,rows:3,placeholder:"Reason",required:!0}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"reason"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-5"):"")):""})]}),(0,N.jsxs)(o.Z.Group,{className:"mb-0",children:[(0,N.jsx)(o.Z.Label,{children:"Leave Remark"}),(0,N.jsx)(o.Z.Control,{as:"textarea",ref:L,rows:3,placeholder:"Remark",required:!0}),(0,N.jsx)("span",{className:"text-danger",children:q.errors.length>0?q.errors.map((e=>"remark"===e.param?(0,N.jsx)(p.Z,{text:e.msg},"err-6"):"")):""})]}),q.isSubmitting?(0,N.jsxs)(c.Z,{variant:"primary",className:"mt-4",children:[(0,N.jsx)(h.Z,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"\u2800Apply"]}):(0,N.jsx)(c.Z,{type:"submit",variant:"danger",className:"mt-4",children:"Apply"})]})})]}),(0,N.jsxs)(x.Z,{show:A,onHide:P,children:[(0,N.jsx)(x.Z.Header,{closeButton:!0,children:(0,N.jsxs)(x.Z.Title,{children:["Leave ",T?"Approve":"Reject"]})}),(0,N.jsx)(x.Z.Body,{children:(0,N.jsx)(o.Z.Group,{className:"mb-0",controlId:"exampleForm.ControlTextarea1",children:(0,N.jsx)(o.Z.Control,{as:"textarea",ref:Z,rows:3,placeholder:"enter remark for "+(T?"Approve":"Reject")})})}),(0,N.jsxs)(x.Z.Footer,{children:[(0,N.jsx)(c.Z,{variant:"danger",onClick:()=>{s((0,l.MN)({jwt:a,id:C,isApproved:T,remark:Z.current.value})),H(!1)},children:"Yes"}),(0,N.jsx)(c.Z,{variant:"primary",onClick:P,children:"No"})]})]}),(0,N.jsxs)(x.Z,{show:Y,onHide:()=>{J(!1),M(),O(null)},children:[(0,N.jsx)(x.Z.Header,{closeButton:!0,children:(0,N.jsxs)(x.Z.Title,{children:["Remark By ",z?z.name:"HR"]})}),(0,N.jsx)(x.Z.Body,{children:(0,N.jsx)("pre",{children:U})})]}),(0,N.jsx)(j.j3,{})]})}},1462:(e,s,a)=>{a.d(s,{Z:()=>l});var r=a(2791),t=a(184);const l=function(e){const s=e.text,a=e.limit,[l,n]=(0,r.useState)(!1);return(0,t.jsx)(t.Fragment,{children:s?(0,t.jsxs)(t.Fragment,{children:[l?s:s.substr(0,e.limit),s.length>a&&(0,t.jsx)("button",{onClick:()=>n(!l),children:l?"...Read Less":"...Read More"})]}):(0,t.jsx)(t.Fragment,{})})}},8116:(e,s,a)=>{a.d(s,{Z:()=>v});var r=a(1418),t=a.n(r),l=a(2791),n=a(162),i=a(6445),c=a(184);const d=l.forwardRef(((e,s)=>{let{active:a=!1,disabled:r=!1,className:l,style:n,activeLabel:d="(current)",children:x,linkStyle:o,linkClassName:h,as:m=i.Z,...j}=e;const u=a||r?"span":m;return(0,c.jsx)("li",{ref:s,style:n,className:t()(l,"page-item",{active:a,disabled:r}),children:(0,c.jsxs)(u,{className:t()("page-link",h),style:o,...j,children:[x,a&&d&&(0,c.jsx)("span",{className:"visually-hidden",children:d})]})})}));d.displayName="PageItem";const x=d;function o(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const r=l.forwardRef(((e,r)=>{let{children:t,...l}=e;return(0,c.jsxs)(d,{...l,ref:r,children:[(0,c.jsx)("span",{"aria-hidden":"true",children:t||s}),(0,c.jsx)("span",{className:"visually-hidden",children:a})]})}));return r.displayName=e,r}const h=o("First","\xab"),m=o("Prev","\u2039","Previous"),j=o("Ellipsis","\u2026","More"),u=o("Next","\u203a"),p=o("Last","\xbb"),g=l.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,size:l,...i}=e;const d=(0,n.vE)(a,"pagination");return(0,c.jsx)("ul",{ref:s,...i,className:t()(r,d,l&&"".concat(d,"-").concat(l))})}));g.displayName="Pagination";const v=Object.assign(g,{First:h,Prev:m,Ellipsis:j,Item:x,Next:u,Last:p})},9468:()=>{}}]);
//# sourceMappingURL=783.996e96f6.chunk.js.map