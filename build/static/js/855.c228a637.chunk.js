"use strict";(self.webpackChunkhrm=self.webpackChunkhrm||[]).push([[855],{8855:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),i=n(9439),s=n(2791),o=n(9434),l=n(8334),c=(n(594),n(8116)),d=n(3360),u=n(4578),x=n(9485),m=n(1734),h=n(2591),v=n(5316),f=n(4849),j=n(4608),g=n(5086),p=n(8746),Z=n(2447),E=n(184);t.default=function(e){var t=(0,o.I0)(),n=e.jwt,b=e.notify,N=(0,s.useState)((new Date).toISOString().substring(0,10)),y=(0,i.Z)(N,2),S=y[0],w=y[1],O=(0,s.useRef)(),C=(0,o.v9)((function(e){return e.attendance})),T=(0,s.useState)(""),I=(0,i.Z)(T,2),k=I[0],P=I[1],D=(0,s.useState)(""),K=(0,i.Z)(D,2),A=K[0],M=K[1];(0,s.useEffect)((function(){t((0,l.go)({jwt:n,date:(new Date).toISOString().substring(0,10)}))}),[t,n]),(0,s.useEffect)((function(){C.isError||(B(!1),t((0,l.qP)()))}),[C.isError,t]);for(var L=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t((0,l.x1)(!0));case 3:if(navigator.geolocation){e.next=7;break}b("Geolocation is not supported by your browser"),e.next=9;break;case 7:return e.next=9,navigator.geolocation.getCurrentPosition((function(e){t((0,l.XY)({jwt:n,users:O.current.value,start:k,end:A,latitude:e.coords.latitude,longitude:e.coords.longitude}))}));case 9:t((0,l.x1)(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(w((new Date).toISOString().substring(0,10)),t((0,l.go)({jwt:n,date:(new Date).toISOString().substring(0,10)}))):t((0,l.go)({jwt:n,date:S}))},H=[],_=function(e){H.push((0,E.jsx)(c.Z.Item,{active:e===Number(C.currentpage),onClick:function(){return F(e)},children:e},e))},q=1;q<=C.totalpages;q++)_(q);var F=function(e){t((0,l.go)({jwt:n,pageno:e,date:S}))},G=(0,s.useState)(!1),U=(0,i.Z)(G,2),z=U[0],B=U[1];return(0,E.jsxs)("div",{className:"page-section p-4",children:[(0,E.jsxs)("div",{className:"employees chart",children:[(0,E.jsxs)("div",{className:"d-md-flex d-block justify-content-between",children:[(0,E.jsx)("h4",{className:"",children:"Daily Attendace Report"}),(0,E.jsx)(d.Z,{variant:"dark",onClick:function(){B(!0)},children:"+ Manual Attendance"})]}),(0,E.jsxs)("div",{className:"row align-items-center my-2",children:[(0,E.jsx)("div",{className:"col-xl-3 col-lg-4 col-12 mt-2",children:(0,E.jsx)(u.Z.Control,{type:"date",value:S,onChange:function(e){w(e.target.value)}})}),(0,E.jsxs)("div",{className:"col-xl-3 col-lg-4 col-12 mt-2",children:[(0,E.jsx)(d.Z,{variant:"danger",onClick:function(){return R()},children:"Search"}),"\xa0\xa0\xa0",(0,E.jsx)(d.Z,{variant:"dark",onClick:function(){return R(!0)},children:"Reset"})]})]}),(0,E.jsx)(x.Z,{defaultActiveKey:"active",id:"uncontrolled-tab-example",className:"mb-3",children:(0,E.jsx)(m.Z,{eventKey:"active",title:"Active",children:(0,E.jsxs)("div",{className:"responsive mt-4",children:[(0,E.jsxs)(h.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"text-white",children:"S.No."}),(0,E.jsx)("th",{className:"text-white",children:"Employee"}),(0,E.jsx)("th",{className:"text-white",children:"Date"}),(0,E.jsx)("th",{className:"text-white",children:"Shift"}),(0,E.jsx)("th",{className:"text-white",children:"Check\u2800In"}),(0,E.jsx)("th",{className:"text-white",children:"Check\u2800Out"}),(0,E.jsx)("th",{className:"text-white",children:"Late"}),(0,E.jsx)("th",{className:"text-white",children:"Early\u2800Leaving"}),(0,E.jsx)("th",{className:"text-white",children:"Effective\u2800Hours"}),(0,E.jsx)("th",{className:"text-white",children:"Total\u2800Hours"})]})}),(0,E.jsx)("tbody",{children:C.isLoading?(0,E.jsx)("tr",{className:"text-center",children:(0,E.jsx)("td",{colSpan:10,children:"Loading..."})},0):C.allData.length>0?C.allData.map((function(e,t){return(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:10*(C.currentpage-1)+(t+1)}),(0,E.jsx)("td",{children:(0,E.jsx)(j.Z,{text:e.users?e.users.name:"N/A"})}),(0,E.jsx)("td",{children:(0,E.jsx)(g.FU,{date_arg:e.created_at})}),(0,E.jsx)("td",{children:(0,E.jsx)(j.Z,{text:e.timeSlot?e.timeSlot.shift:"N/A"})}),(0,E.jsx)("td",{children:(0,E.jsx)(g.ZP,{time:e.inTime})}),(0,E.jsx)("td",{children:e.outTime?(0,E.jsx)(g.ZP,{time:e.outTime}):"--:--"}),(0,E.jsx)("td",{className:"text-center",children:(0,E.jsx)(Z.Z,{late:e.late})}),(0,E.jsx)("td",{className:"text-center",children:(0,E.jsx)(Z.j,{checkOut:e.outTime,outTime:e.timeSlot.time_out})}),(0,E.jsx)("td",{children:(0,E.jsx)(p.O,{inTime:e.inTime,outTime:e.outTime,effective:e.effective_hours})}),(0,E.jsx)("td",{children:(0,E.jsx)(p.O,{inTime:e.inTime,outTime:e.outTime,duration:e.duration})})]},t)})):(0,E.jsx)("tr",{children:(0,E.jsx)("td",{colSpan:10,className:"text-center",children:"No Data Found"})},0)})]}),(0,E.jsx)(c.Z,{children:H})]})})})]}),(0,E.jsxs)(v.Z,{show:z,onHide:function(){B(!1),t((0,l.qP)())},children:[(0,E.jsx)(v.Z.Header,{closeButton:!0,children:(0,E.jsx)(v.Z.Title,{id:"example-custom-modal-styling-title",children:"Manual Attendace"})}),(0,E.jsx)(v.Z.Body,{children:(0,E.jsxs)(u.Z,{onSubmit:L,children:[(0,E.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,E.jsx)(u.Z.Label,{children:"Employee"}),(0,E.jsxs)(u.Z.Select,{"aria-label":"Default select example",ref:O,required:!0,className:"form-control",children:[(0,E.jsx)("option",{value:"",children:"Select"}),C.alluser.length>0?C.alluser.map((function(e,t){return!e.is_deleted&&(0,E.jsxs)("option",{value:e._id,children:[e.name,"(",e.email,")"]},t)})):""]}),(0,E.jsx)("span",{className:"text-danger",children:C.errors.length>0?C.errors.map((function(e){return"users"===e.param?(0,E.jsx)(j.Z,{text:e.msg},"err-1"):""})):""})]}),(0,E.jsxs)(u.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,E.jsxs)(u.Z.Label,{children:["Check In Time ",(0,E.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,E.jsx)(u.Z.Control,{type:"datetime-local",value:k,placeholder:"Name",onChange:function(e){e.preventDefault();var t=e.target.value;console.log("selectedStartDate:",t),t>A&&M(t),P(t)},required:!0}),(0,E.jsx)("span",{className:"text-danger",children:C.errors.length>0?C.errors.map((function(e){return"in_time"===e.param?(0,E.jsx)(j.Z,{text:e.msg},"err-2"):""})):""})]}),(0,E.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,E.jsxs)(u.Z.Label,{children:["Check Out Time ",(0,E.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,E.jsx)(u.Z.Control,{type:"datetime-local",value:A,placeholder:"Name",onChange:function(e){e.preventDefault();var t=e.target.value;console.log("selectedEndDate:",t),t<k&&P(t),M(t)},required:!0}),(0,E.jsx)("span",{className:"text-danger",children:C.errors.length>0?C.errors.map((function(e){return"out_time"===e.param?(0,E.jsx)(j.Z,{text:e.msg},"err-3"):""})):""})]}),C.isSubmitting?(0,E.jsxs)(d.Z,{variant:"primary",className:"mt-4",children:[(0,E.jsx)(f.Z,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"\u2800Mark Attendace"]}):(0,E.jsx)(d.Z,{type:"submit",variant:"danger",className:"mt-4",children:"Mark Attendace/Update"})]})})]})]})}},2447:function(e,t,n){n.d(t,{j:function(){return a}});var r=n(184);function a(e){var t,n=e.outTime,a=e.checkOut,i=new Date(n),s=parseInt(i.getHours().toString().padStart(2,"0")),o=parseInt(i.getMinutes().toString().padStart(2,"0"));if(a){var l=new Date(a),c=parseInt(l.getHours().toString().padStart(2,"0")),d=parseInt(l.getMinutes().toString().padStart(2,"0"));if(s===c)t=o<=d?(0,r.jsx)("span",{className:"bg-success text-white late-area",children:"On\u2800Time"}):(0,r.jsxs)("span",{className:"bg-danger text-white late-area",children:["00:",(o-d).toString().padStart(2,"0")]});else if(s>c){var u=60*s+o-(60*c+d);t=(0,r.jsxs)("span",{className:"bg-danger text-white late-area",children:[Math.floor(u/60).toString().padStart(2,"0"),":",(u%60).toString().padStart(2,"0")]})}else t=(0,r.jsx)("span",{className:"bg-success text-white late-area",children:"On\u2800Time"})}return t}t.Z=function(e){return"ONTIME"!==e.late?Number(e.late.slice(3,5))<=15&&Number(e.late.slice(0,2))<1?(0,r.jsx)("span",{className:"bg-warning text-white late-area",children:e.late}):(0,r.jsx)("span",{className:"bg-danger text-white late-area",children:e.late}):(0,r.jsx)("span",{className:"bg-success text-white late-area",children:"On\u2800Time"})}},8746:function(e,t,n){n.d(t,{O:function(){return s}});var r=n(9439),a=n(2791),i=n(184);function s(e){var t=(0,a.useState)("00:00"),n=(0,r.Z)(t,2),s=n[0],o=n[1];return(0,a.useEffect)((function(){var t=setInterval((function(){if(e.outTime)return o(e.duration?e.duration:e.effective);if(e.inTime){var t,n=new Date(e.inTime).getHours(),r=new Date(e.inTime).getMinutes(),a=(new Date).getHours(),i=60*a+(new Date).getMinutes();t=a>=n?i-(60*n+r):i+(60-r===0?60*(24-n):60*(24-n-1)+(60-r));var s="".concat(parseInt(t/60).toString().padStart(2,"0"),":").concat("".concat(t%60<=9?Math.round(t%60).toString().padStart(2,"0"):t%60));return o(s)}}),1e3);return function(){clearInterval(t)}}),[e]),(0,i.jsx)("span",{children:s})}t.Z=function(){var e=(0,a.useState)(new Date),t=(0,r.Z)(e,2),n=t[0],s=t[1];return(0,a.useEffect)((function(){var e=setInterval((function(){return s(new Date)}),1e3);return function(){clearInterval(e)}}),[]),(0,i.jsx)("span",{children:n.toLocaleTimeString()})}},551:function(e,t,n){n.d(t,{W:function(){return m}});var r=n(9439),a=n(2791),i=n(165),s=n(8633),o=n(5666),l=n(184),c=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],d=["activeKey","getControlledId","getControllerId"],u=["as"];function x(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function m(e){var t=e.active,n=e.eventKey,r=e.mountOnEnter,o=e.transition,l=e.unmountOnExit,u=e.role,m=void 0===u?"tabpanel":u,h=e.onEnter,v=e.onEntering,f=e.onEntered,j=e.onExit,g=e.onExiting,p=e.onExited,Z=x(e,c),E=(0,a.useContext)(i.Z);if(!E)return[Object.assign({},Z,{role:m}),{eventKey:n,isActive:t,mountOnEnter:r,transition:o,unmountOnExit:l,onEnter:h,onEntering:v,onEntered:f,onExit:j,onExiting:g,onExited:p}];var b=E.activeKey,N=E.getControlledId,y=E.getControllerId,S=x(E,d),w=(0,s.h)(n);return[Object.assign({},Z,{role:m,id:N(n),"aria-labelledby":y(n)}),{eventKey:n,isActive:null==t&&null!=w?(0,s.h)(b)===w:t,transition:o||S.transition,mountOnEnter:null!=r?r:S.mountOnEnter,unmountOnExit:null!=l?l:S.unmountOnExit,onEnter:h,onEntering:v,onEntered:f,onExit:j,onExiting:g,onExited:p}]}var h=a.forwardRef((function(e,t){var n=e.as,a=void 0===n?"div":n,c=m(x(e,u)),d=(0,r.Z)(c,2),h=d[0],v=d[1],f=v.isActive,j=v.onEnter,g=v.onEntering,p=v.onEntered,Z=v.onExit,E=v.onExiting,b=v.onExited,N=v.mountOnEnter,y=v.unmountOnExit,S=v.transition,w=void 0===S?o.Z:S;return(0,l.jsx)(i.Z.Provider,{value:null,children:(0,l.jsx)(s.Z.Provider,{value:null,children:(0,l.jsx)(w,{in:f,onEnter:j,onEntering:g,onEntered:p,onExit:Z,onExiting:E,onExited:b,mountOnEnter:N,unmountOnExit:y,children:(0,l.jsx)(a,Object.assign({},h,{ref:t,hidden:!f,"aria-hidden":!f}))})})})}));h.displayName="TabPanel",t.Z=h},5561:function(e,t,n){var r=n(9439),a=n(2791),i=n(3722),s=n(9181),o=n(165),l=n(8633),c=n(551),d=n(184),u=function(e){var t=e.id,n=e.generateChildId,c=e.onSelect,u=e.activeKey,x=e.defaultActiveKey,m=e.transition,h=e.mountOnEnter,v=e.unmountOnExit,f=e.children,j=(0,i.$c)(u,x,c),g=(0,r.Z)(j,2),p=g[0],Z=g[1],E=(0,s.gP)(t),b=(0,a.useMemo)((function(){return n||function(e,t){return E?"".concat(E,"-").concat(t,"-").concat(e):null}}),[E,n]),N=(0,a.useMemo)((function(){return{onSelect:Z,activeKey:p,transition:m,mountOnEnter:h||!1,unmountOnExit:v||!1,getControlledId:function(e){return b(e,"tabpane")},getControllerId:function(e){return b(e,"tab")}}}),[Z,p,m,h,v,b]);return(0,d.jsx)(o.Z.Provider,{value:N,children:(0,d.jsx)(l.Z.Provider,{value:Z||null,children:f})})};u.Panel=c.Z,t.Z=u},8116:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(1413),a=n(5987),i=n(1694),s=n.n(i),o=n(2791),l=n(162),c=n(6445),d=n(184),u=["active","disabled","className","style","activeLabel","children","linkStyle","linkClassName"],x=["children"],m=o.forwardRef((function(e,t){var n=e.active,i=void 0!==n&&n,o=e.disabled,l=void 0!==o&&o,x=e.className,m=e.style,h=e.activeLabel,v=void 0===h?"(current)":h,f=e.children,j=e.linkStyle,g=e.linkClassName,p=(0,a.Z)(e,u),Z=i||l?"span":c.Z;return(0,d.jsx)("li",{ref:t,style:m,className:s()(x,"page-item",{active:i,disabled:l}),children:(0,d.jsxs)(Z,(0,r.Z)((0,r.Z)({className:s()("page-link",g),style:j},p),{},{children:[f,i&&v&&(0,d.jsx)("span",{className:"visually-hidden",children:v})]}))})}));m.displayName="PageItem";var h=m;function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=o.forwardRef((function(e,i){var s=e.children,o=(0,a.Z)(e,x);return(0,d.jsxs)(m,(0,r.Z)((0,r.Z)({},o),{},{ref:i,children:[(0,d.jsx)("span",{"aria-hidden":"true",children:s||t}),(0,d.jsx)("span",{className:"visually-hidden",children:n})]}))}));return i.displayName=e,i}var f=v("First","\xab"),j=v("Prev","\u2039","Previous"),g=v("Ellipsis","\u2026","More"),p=v("Next","\u203a"),Z=v("Last","\xbb"),E=["bsPrefix","className","size"],b=o.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.size,c=(0,a.Z)(e,E),u=(0,l.vE)(n,"pagination");return(0,d.jsx)("ul",(0,r.Z)((0,r.Z)({ref:t},c),{},{className:s()(i,u,o&&"".concat(u,"-").concat(o))}))}));b.displayName="Pagination";var N=Object.assign(b,{First:f,Prev:j,Ellipsis:g,Item:h,Next:p,Last:Z})},1734:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(2007),a=n.n(r),i=(n(2791),n(1413)),s=n(5987),o=n(5561),l=n(3507),c=n(184),d=["transition"],u=function(e){var t=e.transition,n=(0,s.Z)(e,d);return(0,c.jsx)(o.Z,(0,i.Z)((0,i.Z)({},n),{},{transition:(0,l.Z)(t)}))};u.displayName="TabContainer";var x=u,m=n(4886),h=n(4504),v={eventKey:a().oneOfType([a().string,a().number]),title:a().node.isRequired,disabled:a().bool,tabClassName:a().string,tabAttrs:a().object},f=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};f.propTypes=v;var j=Object.assign(f,{Container:x,Content:m.Z,Pane:h.Z})},4886:function(e,t,n){var r=n(6543);t.Z=(0,r.Z)("tab-content")},4504:function(e,t,n){var r=n(1413),a=n(9439),i=n(5987),s=n(1694),o=n.n(s),l=n(2791),c=n(8633),d=n(165),u=n(551),x=n(162),m=n(2709),h=n(3507),v=n(184),f=["bsPrefix","transition"],j=["className","as"],g=l.forwardRef((function(e,t){var n=e.bsPrefix,s=e.transition,l=(0,i.Z)(e,f),g=(0,u.W)((0,r.Z)((0,r.Z)({},l),{},{transition:(0,h.Z)(s)})),p=(0,a.Z)(g,2),Z=p[0],E=Z.className,b=Z.as,N=void 0===b?"div":b,y=(0,i.Z)(Z,j),S=p[1],w=S.isActive,O=S.onEnter,C=S.onEntering,T=S.onEntered,I=S.onExit,k=S.onExiting,P=S.onExited,D=S.mountOnEnter,K=S.unmountOnExit,A=S.transition,M=void 0===A?m.Z:A,L=(0,x.vE)(n,"tab-pane");return(0,v.jsx)(d.Z.Provider,{value:null,children:(0,v.jsx)(c.Z.Provider,{value:null,children:(0,v.jsx)(M,{in:w,onEnter:O,onEntering:C,onEntered:T,onExit:I,onExiting:k,onExited:P,mountOnEnter:D,unmountOnExit:K,children:(0,v.jsx)(N,(0,r.Z)((0,r.Z)({},y),{},{ref:t,className:o()(E,L,w&&"active")}))})})})}));g.displayName="TabPane",t.Z=g},9485:function(e,t,n){var r=n(5987),a=n(1413),i=(n(2791),n(8580)),s=n(5561),o=n(6387),l=n(9102),c=n(881),d=n(4886),u=n(4504),x=n(1701),m=n(3507),h=n(184),v=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function f(e){var t=e.props,n=t.title,r=t.eventKey,i=t.disabled,s=t.tabClassName,o=t.tabAttrs,d=t.id;return null==n?null:(0,h.jsx)(c.Z,{as:"li",role:"presentation",children:(0,h.jsx)(l.Z,(0,a.Z)((0,a.Z)({as:"button",type:"button",eventKey:r,disabled:i,id:d,className:s},o),{},{children:n}))})}var j=function(e){var t=(0,i.Ch)(e,{activeKey:"onSelect"}),n=t.id,l=t.onSelect,c=t.transition,j=t.mountOnEnter,g=void 0!==j&&j,p=t.unmountOnExit,Z=void 0!==p&&p,E=t.variant,b=void 0===E?"tabs":E,N=t.children,y=t.activeKey,S=void 0===y?function(e){var t;return(0,x.Ed)(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(N):y,w=(0,r.Z)(t,v);return(0,h.jsxs)(s.Z,{id:n,activeKey:S,onSelect:l,transition:(0,m.Z)(c),mountOnEnter:g,unmountOnExit:Z,children:[(0,h.jsx)(o.Z,(0,a.Z)((0,a.Z)({},w),{},{role:"tablist",as:"ul",variant:b,children:(0,x.UI)(N,f)})),(0,h.jsx)(d.Z,{children:(0,x.UI)(N,(function(e){var t=(0,a.Z)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,h.jsx)(u.Z,(0,a.Z)({},t))}))})]})};j.displayName="Tabs",t.Z=j},3507:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(5666),a=n(2709);function i(e){return"boolean"===typeof e?e?a.Z:r.Z:e}},594:function(){}}]);
//# sourceMappingURL=855.c228a637.chunk.js.map