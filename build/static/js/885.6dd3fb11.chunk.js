"use strict";(self.webpackChunkhrm=self.webpackChunkhrm||[]).push([[885],{7885:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var n=t(2791),a=t(9434),i=t(2427),c=t(763),l=t(7692),d=t(8014),o=t(8478),r=t(3496),m=t(7770),h=t(4849),u=t(8746),x=t(184);const j=function(e){const[s,t]=(0,n.useState)(""),j=(0,a.I0)(),g=e.socket,v=e.jwt,b=e.notify,p=(0,a.v9)((e=>e.userDashboard));(0,n.useEffect)((()=>{j((0,i.go)({jwt:v})),(async()=>{const e=await fetch("https://api.ipify.org/?format=json",{method:"GET",mode:"cors"});t((await e.json()).ip)})()}),[j,v]);const N=function(){const e=navigator.userAgent.toLowerCase();return e.includes("android")?"Android":e.includes("iphone")||e.includes("ipad")||e.includes("ipod")?"iOS":e.includes("windows")?"Windows":"Unknown"}();console.log("ip:",s,N),(0,n.useEffect)((()=>{g.emit("setuser",{email:e.current_user.email,department:e.current_user.designation.department}),g.emit("check_notice"),g.on("recive_notice",(s=>{s.is_announ&&(e.setAnnouncement_New_notice(!0),e.setTotalAnnoun(s.total_announ)),s.is_policy&&(e.setPolicy_New_notice(!0),e.setTotalPlicy(s.total_policy))}))}),[e,g]);const y=(0,c.debounce)((()=>{j((0,i.x1)(!0)),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{j((0,i.XY)({jwt:v,latitude:e.coords.latitude,longitude:e.coords.longitude,type:p.todayAttendance.outTime||p.todayAttendance.inTime?"check_out":"check_in"}))})):(b("Geolocation is not supported by your browser",!0),j((0,i.x1)(!1)))}),100),f={options:{chart:{id:"basic-bar"},xaxis:{type:"category",categories:[],labels:{formatter:function(e){return e}}},yaxis:[{labels:{formatter:function(e){return e}},title:{text:"In Hours"}}]},series:[{name:"duration",data:[]}]},w={options:{chart:{id:"basic-bar"},xaxis:{categories:[]}},series:[{data:[]}]};p.attendance_chart.map((e=>(f.series[0].data.push(e.value),f.options.xaxis.categories.push(e.date.slice(0,10))))),p.salary_chart.map((e=>(w.series[0].data.push(e.value),w.options.xaxis.categories.push(e.month))));const T=new Date;return p.isLoading?(0,x.jsx)(m.Z,{}):(0,x.jsxs)("div",{className:"page-section p-4",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12",children:(0,x.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)("img",{src:e.current_user.image_link?e.current_user.image_link:o,alt:"User",className:"img-fluid rounded-circle",style:{width:"50px",height:"50px"}}),(0,x.jsxs)("div",{className:"ms-2",children:[(0,x.jsxs)("h5",{className:"mb-0",children:[(0,x.jsx)("h1",{style:{color:"red"},children:e.current_user.name})," Logged in through:",N]}),(0,x.jsx)("p",{className:"text-muted mb-0",children:e.current_user.email})]})]})})})}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-9 col-12",children:[(0,x.jsxs)("div",{className:"row mt-md-4 mt-0",children:[(0,x.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-6 col-12",children:(0,x.jsx)("div",{className:"box-dashboard",children:(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("h5",{className:"text-muted mb-4",children:"Total Hours"}),(0,x.jsx)("h3",{className:"text-muted mb-0",children:(0,x.jsx)(u.O,{inTime:p.todayAttendance.inTime,outTime:p.todayAttendance.outTime,duration:p.todayAttendance.duration})})]}),(0,x.jsx)("div",{className:"text-danger",children:(0,x.jsx)(l.Gzv,{})})]})})}),(0,x.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-6 col-12",children:(0,x.jsx)("div",{className:"box-dashboard",children:(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("h5",{className:"text-muted mb-4",children:" Total Presence"}),(0,x.jsx)("h3",{className:"text-muted mb-0",children:p.total_present})]}),(0,x.jsx)("div",{className:"text-danger",children:(0,x.jsx)(d.Z_K,{})})]})})}),(0,x.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-6 col-12",children:(0,x.jsx)("div",{className:"box-dashboard",children:(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("h5",{className:"text-muted mb-4",children:"Total Leave"}),(0,x.jsxs)("h3",{className:"text-muted mb-0",children:[p.total_leaves.paid_leave,(0,x.jsx)("span",{children:"-Paid"})]}),(0,x.jsxs)("h3",{className:"text-muted mb-0",children:[" ",p.total_leaves.unpaid_leave,(0,x.jsx)("span",{children:"-UnPaid"})]})]}),(0,x.jsx)("div",{className:"text-danger",children:(0,x.jsx)(d.Z_K,{})})]})})}),(0,x.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-6 col-12",children:(0,x.jsx)("div",{className:"box-dashboard",children:(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("h5",{className:"text-muted mb-4",children:" Total Earning"}),(0,x.jsxs)("h3",{className:"text-muted mb-0",children:["\u20b9 ",p.total_salary," "]})]}),(0,x.jsx)("div",{className:"text-danger",children:(0,x.jsx)(l.Gzv,{})})]})})})]}),(0,x.jsxs)("div",{className:"row mt-md-4 mt-0",children:[(0,x.jsx)("div",{className:"col-xl-6 col-lg-6 col-12",children:(0,x.jsxs)("div",{className:"chart",children:[(0,x.jsx)("h4",{children:"Attendance"}),(0,x.jsx)(r.Z,{options:f.options,series:f.series,type:"bar",width:"100%"})]})}),(0,x.jsx)("div",{className:"col-xl-6 col-lg-6 col-12",children:(0,x.jsxs)("div",{className:"chart",children:[(0,x.jsx)("h4",{children:"Payroll monthly report"}),(0,x.jsx)(r.Z,{options:w.options,series:w.series,type:"line",width:"100%"})]})})]})]}),(0,x.jsx)("div",{className:"col-lg-3 col-12",children:(0,x.jsxs)("div",{className:"timezone mt-md-4 mt-0",children:[(0,x.jsxs)("div",{className:"mb-0",children:[(0,x.jsxs)("span",{className:"date-section",children:["Today: ",T.toString().slice(0,15)]}),(0,x.jsx)("p",{className:"mb-0",children:"Time"}),(0,x.jsx)("span",{children:(0,x.jsx)(u.Z,{})})]}),(0,x.jsxs)("div",{className:"text-left",children:[(0,x.jsx)("small",{children:"Get ready for an amazing workday!"}),(0,x.jsx)("br",{}),p.todayAttendance.outTime&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("h4",{children:"Today you completed office Hours"})}),p.isSubmitting?(0,x.jsxs)("button",{type:"button",className:p.todayAttendance.inTime?p.todayAttendance.outTime?"btn btn-success":"btn btn-danger":"btn btn-success",disabled:!0,children:[(0,x.jsx)(h.Z,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),p.todayAttendance.inTime?p.todayAttendance.outTime?"Check In":"Check Out":"Check In"]}):!p.todayAttendance.outTime&&(0,x.jsx)("button",{type:"button",className:p.todayAttendance.inTime?p.todayAttendance.outTime?"btn btn-success":"btn btn-danger":"btn btn-success",onClick:y,children:p.todayAttendance.inTime?p.todayAttendance.outTime?"Check In":"Check Out":"Check In"}),(0,x.jsx)("small",{children:"Policy: Normal Attendance Policy "})]})]})})]})]})}},8746:(e,s,t)=>{t.d(s,{O:()=>i,Z:()=>c});var n=t(2791),a=t(184);function i(e){const[s,t]=(0,n.useState)("00:00");return(0,n.useEffect)((()=>{const s=setInterval((()=>{if(e.outTime)return t(e.duration?e.duration:e.effective);if(e.inTime){let s,n=new Date(e.inTime).getHours(),a=new Date(e.inTime).getMinutes(),i=0,c=(new Date).getHours(),l=60*c+(new Date).getMinutes();c>=n?(i=60*n+a,s=l-i):(i=60-a===0?60*(24-n):60*(24-n-1)+(60-a),s=l+i);let d="".concat(parseInt(s/60).toString().padStart(2,"0"),":").concat("".concat(s%60<=9?Math.round(s%60).toString().padStart(2,"0"):s%60));return t(d)}}),1e3);return()=>{clearInterval(s)}}),[e]),(0,a.jsx)("span",{children:s})}const c=function(){const[e,s]=(0,n.useState)(new Date);return(0,n.useEffect)((()=>{const e=setInterval((()=>s(new Date)),1e3);return()=>{clearInterval(e)}}),[]),(0,a.jsx)("span",{children:e.toLocaleTimeString()})}}}]);
//# sourceMappingURL=885.6dd3fb11.chunk.js.map