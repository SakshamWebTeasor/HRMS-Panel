"use strict";(self.webpackChunkhrm=self.webpackChunkhrm||[]).push([[28],{5028:(e,a,n)=>{n.r(a),n.d(a,{default:()=>N});var t=n(2791),o=n(4608),i=n(9085),c=n(4867);const s=n(8194),r=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?i.Am.error(e,{theme:"colored"}):i.Am.success(e,{theme:"colored"})},l=[{code:"AED",name:"UAE Dirham (AED)"},{code:"AFN",name:"Afghan Afghani (AFN)"},{code:"ALL",name:"Albanian Lek (ALL)"},{code:"AMD",name:"Armenian Dram (AMD)"},{code:"ANG",name:"Netherlands Antillian Guilder (ANG)"},{code:"AOA",name:"Angolan Kwanza (AOA)"},{code:"ARS",name:"Argentine Peso (ARS)"},{code:"AUD",name:"Australian Dollar (AUD)"},{code:"AWG",name:"Aruban Florin (AWG)"},{code:"AZN",name:"Azerbaijani Manat (AZN)"},{code:"BAM",name:"Bosnia and Herzegovina Mark (BAM)"},{code:"BBD",name:"Barbados Dollar (BBD)"},{code:"BDT",name:"Bangladeshi Taka (BDT)"},{code:"BGN",name:"Bulgarian Lev (BGN)"},{code:"BHD",name:"Bahraini Dinar (BHD)"},{code:"BIF",name:"Burundian Franc (BIF)"},{code:"BMD",name:"Bermudian Dollar (BMD)"},{code:"BND",name:"Brunei Dollar (BND)"},{code:"BOB",name:"Bolivian Boliviano (BOB)"},{code:"BRL",name:"Brazilian Real (BRL)"},{code:"BSD",name:"Bahamian Dollar (BSD)"},{code:"BTN",name:"Bhutanese Ngultrum (BTN)"},{code:"BWP",name:"Botswana Pula (BWP)"},{code:"BYN",name:"Belarusian Ruble (BYN)"},{code:"BZD",name:"Belize Dollar (BZD)"},{code:"CAD",name:"Canadian Dollar (CAD)"},{code:"CDF",name:"Congolese Franc (CDF)"},{code:"CHF",name:"Swiss Franc (CHF)"},{code:"CLP",name:"Chilean Peso (CLP)"},{code:"CNY",name:"Chinese Renminbi (CNY)"},{code:"COP",name:"Colombian Peso (COP)"},{code:"CRC",name:"Costa Rican Colon (CRC)"},{code:"CUP",name:"Cuban Peso (CUP)"},{code:"CVE",name:"Cape Verdean Escudo (CVE)"},{code:"CZK",name:"Czech Koruna (CZK)"},{code:"DJF",name:"Djiboutian Franc (DJF)"},{code:"DKK",name:"Danish Krone (DKK)"},{code:"DOP",name:"Dominican Peso (DOP)"},{code:"DZD",name:"Algerian Dinar (DZD)"},{code:"EGP",name:"Egyptian Pound (EGP)"},{code:"ERN",name:"Eritrean Nakfa (ERN)"},{code:"ETB",name:"Ethiopian Birr (ETB)"},{code:"EUR",name:"Euro (EUR)"},{code:"FJD",name:"Fijian Dollar (FJD)"},{code:"FKP",name:"Falkland Islands Pound (FKP)"},{code:"FOK",name:"Faroese Kr\xf3na (FOK)"},{code:"GBP",name:"British Pound Sterling (GBP)"},{code:"GEL",name:"Georgian Lari (GEL)"},{code:"GGP",name:"Guernsey Pound (GGP)"},{code:"GHS",name:"Ghanaian Cedi (GHS)"},{code:"GIP",name:"Gibraltar Pound (GIP)"},{code:"GMD",name:"Gambian Dalasi (GMD)"},{code:"GNF",name:"Guinean Franc (GNF)"},{code:"GTQ",name:"Guatemalan Quetzal (GTQ)"},{code:"GYD",name:"Guyanese Dollar (GYD)"},{code:"HKD",name:"Hong Kong Dollar (HKD)"},{code:"HNL",name:"Honduran Lempira (HNL)"},{code:"HRK",name:"Croatian Kuna (HRK)"},{code:"HTG",name:"Haitian Gourde (HTG)"},{code:"HUF",name:"Hungarian Forint (HUF)"},{code:"INR",name:"Indian Rupee (INR)"},{code:"IDR",name:"Indonesian Rupiah (IDR)"},{code:"ILS",name:"Israeli New Shekel (ILS)"},{code:"IMP",name:"Isle of Man Pound (IMP)"},{code:"IQD",name:"Iraqi Dinar (IQD)"},{code:"IRR",name:"Iranian Rial (IRR)"},{code:"ISK",name:"Icelandic Kr\xf3na (ISK)"},{code:"JEP",name:"Jersey Pound (JEP)"},{code:"JMD",name:"Jamaican Dollar (JMD)"},{code:"JOD",name:"Jordanian Dinar (JOD)"},{code:"JPY",name:"Japanese Yen (JPY)"},{code:"KES",name:"Kenyan Shilling (KES)"},{code:"KGS",name:"Kyrgyzstani Som (KGS)"},{code:"KHR",name:"Cambodian Riel (KHR)"},{code:"KID",name:"Kiribati Dollar (KID)"},{code:"KMF",name:"Comorian Franc (KMF)"},{code:"KRW",name:"South Korean Won (KRW)"},{code:"KWD",name:"Kuwaiti Dinar (KWD)"},{code:"KYD",name:"Cayman Islands Dollar (KYD)"},{code:"KZT",name:"Kazakhstani Tenge (KZT)"},{code:"LAK",name:"Lao Kip (LAK)"},{code:"LBP",name:"Lebanese Pound (LBP)"},{code:"LKR",name:"Sri Lankan Rupee (LKR)"},{code:"LRD",name:"Liberian Dollar (LRD)"},{code:"LSL",name:"Lesotho Loti (LSL)"},{code:"LYD",name:"Libyan Dinar (LYD)"},{code:"MAD",name:"Moroccan Dirham (MAD)"},{code:"MDL",name:"Moldovan Leu (MDL)"},{code:"MGA",name:"Malagasy Ariary (MGA)"},{code:"MKD",name:"Macedonian Denar (MKD)"},{code:"MMK",name:"Myanmar Kyat (MMK)"},{code:"MNT",name:"Mongolian Tugrik (MNT)"},{code:"MOP",name:"Macanese Pataca (MOP)"},{code:"MRU",name:"Mauritanian Ouguiya (MRU)"},{code:"MUR",name:"Mauritian Rupee (MUR)"},{code:"MVR",name:"Maldivian Rufiyaa (MVR)"},{code:"MWK",name:"Malawian Kwacha (MWK)"},{code:"MXN",name:"Mexican Peso (MXN)"},{code:"MYR",name:"Malaysian Ringgit (MYR)"},{code:"MZN",name:"Mozambican Metical (MZN)"},{code:"NAD",name:"Namibian Dollar (NAD)"},{code:"NGN",name:"Nigerian Naira (NGN)"},{code:"NIO",name:"Nicaraguan C\xf3rdoba (NIO)"},{code:"NOK",name:"Norwegian Krone (NOK)"},{code:"NPR",name:"Nepalese Rupee (NPR)"},{code:"NZD",name:"New Zealand Dollar (NZD)"},{code:"OMR",name:"Omani Rial (OMR)"},{code:"PAB",name:"Panamanian Balboa (PAB)"},{code:"PEN",name:"Peruvian Nuevo Sol (PEN)"},{code:"PGK",name:"Papua New Guinean Kina (PGK)"},{code:"PHP",name:"Philippine Peso (PHP)"},{code:"PKR",name:"Pakistani Rupee (PKR)"},{code:"PLN",name:"Polish Z\u0142oty (PLN)"},{code:"PYG",name:"Paraguayan Guarani (PYG)"},{code:"QAR",name:"Qatari Riyal (QAR)"},{code:"RON",name:"Romanian Leu (RON)"},{code:"RSD",name:"Serbian Dinar (RSD)"},{code:"RUB",name:"Russian Ruble (RUB)"},{code:"RWF",name:"Rwandan Franc (RWF)"},{code:"SAR",name:"Saudi Riyal (SAR)"},{code:"SBD",name:"Solomon Islands Dollar (SBD)"},{code:"SCR",name:"Seychellois Rupee (SCR)"},{code:"SDG",name:"Sudanese Pound (SDG)"},{code:"SEK",name:"Swedish Krona (SEK)"},{code:"SGD",name:"Singapore Dollar (SGD)"},{code:"SHP",name:"Saint Helena Pound (SHP)"},{code:"SLE",name:"Sierra Leonean Leone (SLE)"},{code:"SLL",name:"Sierra Leonean Leone (SLL)"},{code:"SOS",name:"Somali Shilling (SOS)"},{code:"SRD",name:"Surinamese Dollar (SRD)"},{code:"SSP",name:"South Sudanese Pound (SSP)"},{code:"STN",name:"S\xe3o Tom\xe9 and Pr\xedncipe Dobra (STN)"},{code:"SYP",name:"Syrian Pound (SYP)"},{code:"SZL",name:"Swazi Lilangeni (SZL)"},{code:"THB",name:"Thai Baht (THB)"},{code:"TJS",name:"Tajikistani Somoni (TJS)"},{code:"TMT",name:"Turkmenistan Manat (TMT)"},{code:"TND",name:"Tunisian Dinar (TND)"},{code:"TOP",name:"Tongan Paanga (TOP)"},{code:"TRY",name:"Turkish Lira (TRY)"},{code:"TTD",name:"Trinidad and Tobago Dollar (TTD)"},{code:"TVD",name:"Tuvaluan Dollar (TVD)"},{code:"TWD",name:"New Taiwan Dollar (TWD)"},{code:"TZS",name:"Tanzanian Shilling (TZS)"},{code:"UAH",name:"Ukrainian Hryvnia (UAH)"},{code:"UGX",name:"Ugandan Shilling (UGX)"},{code:"USD",name:"United States Dollar (USD)"},{code:"UYU",name:"Uruguayan Peso (UYU)"},{code:"UZS",name:"Uzbekistan Som (UZS)"},{code:"VES",name:"Venezuelan Bol\xedvar (VES)"},{code:"VND",name:"Vietnamese \u0110\u1ed3ng (VND)"},{code:"VUV",name:"Vanuatu Vatu (VUV)"},{code:"WST",name:"Samoan Tala (WST)"},{code:"XAF",name:"Central African CFA Franc (XAF)"},{code:"XCD",name:"East Caribbean Dollar (XCD)"},{code:"XDR",name:"Special Drawing Rights (XDR)"},{code:"XOF",name:"West African CFA Franc (XOF)"},{code:"XPF",name:"CFP Franc (XPF)"},{code:"YER",name:"Yemeni Rial (YER)"},{code:"ZAR",name:"South African Rand (ZAR)"},{code:"ZMW",name:"Zambian Kwacha (ZMW)"},{code:"ZWL",name:"Zimbabwean Dollar (ZWL)"}],d=[{code:"USD",name:"United States Dollar (USD)"},{code:"INR",name:"Indian Rupee (INR)"},{code:"EUR",name:"Euro (EUR)"},{code:"GBP",name:"British Pound Sterling (GBP)"},{code:"AUD",name:"Australian Dollar (AUD)"},{code:"JPY",name:"Japanese Yen (JPY)"},{code:"CHF",name:"Swiss Franc (CHF)"},{code:"CAD",name:"Canadian Dollar (CAD)"},{code:"SGD",name:"Singapore Dollar (SGD)"},{code:"CNY",name:"Chinese Yuan (CNY)"},{code:"ZAR",name:"South African Rand (ZAR)"},{code:"BRL",name:"Brazilian Real (BRL)"},{code:"RUB",name:"Russian Ruble (RUB)"},{code:"AED",name:"Arab Emirates Dirham (AED)"}];var m=n(184);const u=e=>{let{setInvoiceList:a,jwt:n,updateData:i,setUpdateData:l,currencyExchange:u}=e;const h=e=>{const a=new Date(e),n=a.getFullYear(),t=a.getMonth()+1,o=a.getDate();return"".concat(n,"-").concat(t,"-").concat(o)},x=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let o=0;o<3;o++)a+=e.charAt(Math.floor(36*Math.random()));const n=Date.now(),t=n.toString();return a+Array.from(t,(e=>"ACEGIKMOQSUWY"[parseInt(e)])).join("")},D={invoiceNo:x(),invoiceTitle:"",invoiceDate:h(Date.now()),dueDate:h(Date.now()),businessName:"",businessAddress:{address:"",state:"",country:"",pincode:""},clientName:"",currency:"",items:[{projectName:"",quantity:1,amount:1,description:""}],tax:[{taxName:"",taxRate:0}],totalTax:0,totalAmount:1,grandTotalAmount:1,attachments:[],additionalInfo:"",contactDetails:"",saveAsDraft:!1},[N,j]=(0,t.useState)(D),[v,S]=(0,t.useState)(null),p=(e,a)=>{const n=e.split(".");j({...N,[n[0]]:n[1]?{...N[n[0]],[n[1]]:a}:a})},A=(e,a,n,t)=>{if("tax"===t){const t=[...N.tax];let o="taxRate"==a;n=o?parseInt(n):n,isNaN(n)||(n=n<0?0:n);const i=t[e];t[e]={...t[e],[a]:n};let c=n;if("taxName"==a)switch(o=!0,t[e].taxName){case"GST":case"IGST":t[e].taxRate=18,c=18;break;case"HST":t[e].taxRate=13,c=13;break;case"TAX":case"PPN":t[e].taxRate=10,c=10;break;case"VAT":case"SST":t[e].taxRate=5,c=5;break;default:t[e].taxRate=0,c=0}return void j((e=>({...e,tax:t,totalTax:o?N.totalTax-i.taxRate+c:N.totalTax})))}const o=[...N.items];let i=0,c=!1;if("quantity"==a||"amount"==a){n<1&&(n=1),c=!0;const a=o[e];i=a.amount*a.quantity}o[e]={...o[e],[a]:n};const s=o[e].amount*o[e].quantity;j({...N,items:o,totalAmount:c?N.totalAmount-i+s:N.totalAmount})},y=e=>{if("tax"===e){const e={taxName:"",taxRate:0};return void j({...N,tax:[...N.tax,{...e}],totalTax:N.totalTax+e.taxRate})}const a={projectName:"",quantity:1,amount:1,description:""};j({...N,items:[...N.items,{...a}],totalAmount:N.totalAmount+a.amount*a.quantity})},g=(e,a)=>{if("tax"===a){const a=[...N.tax],n=a[e].taxRate;return a.splice(e,1),void j({...N,tax:a,totalTax:N.totalTax-n})}const n=[...N.items],t=n[e].amount*n[e].quantity;n.splice(e,1),j({...N,items:n,totalAmount:N.totalAmount-t})},T=async()=>{let e=await(async e=>{const a={"Content-Type":"application/json",Authorization:e.jwt};let n=s.ADMIN_API_URL+"invoice",t={method:"POST",mode:"cors",headers:a,body:JSON.stringify(e.invoiceData)};try{const e=await(await fetch(n,t)).json();if("successfull"===e.status)return r("Added Successfully"),e.data;if("token_expire"===e.status)return(0,c.Z)(),!1;for(const a of e.errors)r(a.msg,!0);return!1}catch(o){return r("Someting Wrong !",!0),console.log(o),!1}})({invoiceData:N,jwt:n});e&&(j(D),a((a=>{const n=a.length>0?a.filter((a=>a.invoiceNo!==e.invoiceNo)):[],t=e.grandTotalAmount/u.currencies.filter((a=>a.currencyCode===e.currency))[0].conversionRateForAUnit;return e={...e,dueDate:v,grandTotalAmountConverted:t},[...n,e]})))},f=async()=>{const e=await(async e=>{const a={"Content-Type":"application/json",Authorization:e.jwt};let n=s.ADMIN_API_URL+"invoice/".concat(e.invoiceData._id),t={method:"PUT",mode:"cors",headers:a,body:JSON.stringify(e.invoiceData)};try{const e=await(await fetch(n,t)).json();if("updated successfully"===e.status)return r(e.status),e.data;if("token_expire"===e.status)return(0,c.Z)(),!1;for(const a of e.errors)r(a.msg,!0);return!1}catch(o){return r("Someting Wrong !",!0),console.log(o),!1}})({invoiceData:N,jwt:n});e&&(l(null),a((a=>{const n=a.findIndex((a=>a.invoiceNo===e.invoiceNo)),t=e.grandTotalAmount/u.currencies.filter((a=>a.currencyCode===e.currency))[0].conversionRateForAUnit;return-1!==n?a[n]={...e,grandTotalAmountConverted:t}:console.log("Element not found"),a})))};return(0,t.useEffect)((()=>{i?(j(i),S(i.dueDate)):null==i&&(j(D),S(null))}),[i]),(0,t.useEffect)((()=>{parseInt(N.totalTax)>-1&&j((e=>(console.log(e.totalTax),{...e,grandTotalAmount:e.totalAmount+e.totalAmount*e.totalTax/100})))}),[N.totalTax,N.totalAmount]),(0,m.jsxs)("div",{className:"invoice-container heightFix",children:[(0,m.jsx)("h2",{children:i?"Edit Invoice":"Add Invoice"}),i?(0,m.jsx)(m.Fragment,{}):(0,m.jsx)("div",{className:"projects mb d-flex justify-content-end",children:(0,m.jsx)("button",{onClick:()=>{j((e=>({...e,invoiceNo:x()})))},children:"Generate Unique Code"})}),(0,m.jsxs)("div",{className:"general-info",children:[(0,m.jsxs)("div",{className:"mb-3 mt-4 d-flex justify-content-between",children:[(0,m.jsx)("span",{children:"Unique Invoice Code:"}),(0,m.jsx)("strong",{children:(0,m.jsx)(o.Z,{text:N.invoiceNo})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Invoice Title"}),(0,m.jsx)("input",{type:"text",value:N.invoiceTitle,onChange:e=>p("invoiceTitle",e.target.value)})]}),(0,m.jsxs)("div",{className:"total-amount d-flex justify-content-between mb-4",children:[(0,m.jsx)("span",{children:"Invoice Date:"}),(0,m.jsx)("strong",{children:N.invoiceDate})]}),i?(0,m.jsxs)("div",{className:"total-amount d-flex justify-content-between mb-4",children:[(0,m.jsx)("span",{children:"Last Due Date:"}),(0,m.jsx)("strong",{children:v})]}):(0,m.jsx)("div",{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:i?"Your New Due Date*":"Due Date*"}),(0,m.jsx)("input",{type:"date",value:N.dueDate,onChange:e=>p("dueDate",e.target.value)})]})]}),(0,m.jsxs)("div",{className:"business-info",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{children:"Business Name"}),(0,m.jsx)("input",{type:"text",value:N.businessName,onChange:e=>p("businessName",e.target.value)})]}),(0,m.jsxs)("div",{className:"address-info",children:[(0,m.jsx)("label",{children:"Business Address"}),(0,m.jsx)("div",{className:"address-fields",children:Object.keys(N.businessAddress).map(((e,a)=>(0,m.jsx)("div",{className:"w-100",children:(0,m.jsx)("input",{type:"pincode"===e?"number":"text",value:N.businessAddress[e],onChange:a=>p("businessAddress.".concat(e),a.target.value),placeholder:e})},a)))})]})]}),(0,m.jsxs)("div",{className:"client-info",children:[(0,m.jsx)("label",{children:"Client Name"}),(0,m.jsx)("input",{type:"text",value:N.clientName,onChange:e=>p("clientName",e.target.value)})]}),(0,m.jsxs)("div",{className:"currency-info",children:[(0,m.jsx)("label",{children:"Valid Dealing Currencies"}),(0,m.jsx)("select",{className:"form-control form-select",value:N.currency,onChange:e=>p("currency",e.target.value),children:d.map((e=>(0,m.jsx)("option",{value:e.code,children:e.name},e.code)))})]}),(0,m.jsxs)("div",{className:"projects",children:[(0,m.jsx)("h2",{children:"Projects"}),N.items.map(((e,a)=>(0,m.jsxs)("div",{className:"project-info",children:[(0,m.jsx)("label",{children:"Project Name"}),(0,m.jsx)("input",{type:"text",value:e.projectName,onChange:e=>A(a,"projectName",e.target.value)}),(0,m.jsx)("label",{children:"Quantity"}),(0,m.jsx)("input",{type:"number",value:e.quantity,onChange:e=>A(a,"quantity",e.target.value)}),(0,m.jsx)("label",{children:"Amount"}),(0,m.jsx)("input",{type:"number",value:e.amount,onChange:e=>A(a,"amount",e.target.value)}),(0,m.jsx)("label",{children:"Description"}),(0,m.jsx)("input",{type:"text",value:e.description,onChange:e=>A(a,"description",e.target.value)}),a>0&&(0,m.jsx)("button",{onClick:()=>g(a),children:"Remove Item"})]},a))),(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)("button",{onClick:y,className:"mt-2",children:"Add Project"})})]}),(0,m.jsxs)("div",{className:"total-amount d-flex justify-content-between mb-4",children:[(0,m.jsx)("span",{children:"Total Amount:"}),(0,m.jsx)("strong",{children:N.totalAmount})]}),(0,m.jsxs)("div",{className:"projects",children:[(0,m.jsx)("h3",{children:"Taxes"}),N.tax.map(((e,a)=>(0,m.jsxs)("div",{className:"project-info",children:[(0,m.jsx)("label",{children:"Tax Name"}),(0,m.jsxs)("select",{className:"form-control form-select mb15",value:e.taxName,onChange:e=>A(a,"taxName",e.target.value,"tax"),children:[(0,m.jsx)("option",{value:"",children:"custom tax"}),(0,m.jsx)("option",{value:"None",children:"None"}),(0,m.jsx)("option",{value:"GST",children:"GST"}),(0,m.jsx)("option",{value:"IGST",children:"IGST"}),(0,m.jsx)("option",{value:"VAT",children:"VAT"}),(0,m.jsx)("option",{value:"PPN",children:"PPN"}),(0,m.jsx)("option",{value:"SST",children:"SST"}),(0,m.jsx)("option",{value:"HST",children:"HST"}),(0,m.jsx)("option",{value:"TAX",children:"TAX"})]}),"None"!==e.taxName&&"GST"!==e.taxName&&"IGST"!==e.taxName&&"VAT"!==e.taxName&&"PPN"!==e.taxName&&"SST"!==e.taxName&&"HST"!==e.taxName&&"TAX"!==e.taxName&&(0,m.jsx)("input",{type:"text",placeholder:"Enter custom tax name",value:e.taxName,onChange:e=>A(a,"taxName",e.target.value,"tax")}),(0,m.jsx)("label",{children:"Rate (in %)"}),(0,m.jsx)("input",{type:"number",disabled:e.taxName.includes("GST")||e.taxName.includes("HST")||e.taxName.includes("TAX")||e.taxName.includes("VAT")||e.taxName.includes("SST")||e.taxName.includes("PPN")||e.taxName.includes("IGST")||e.taxName.includes("None"),value:e.taxRate,onChange:e=>A(a,"taxRate",e.target.value,"tax")}),0!==a&&(0,m.jsx)("button",{onClick:()=>g(a,"tax"),children:"Remove This Tax"})]},a))),(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)("button",{onClick:()=>y("tax"),className:"mt-2",children:"Add More Tax Varieties"})})]}),(0,m.jsxs)("div",{className:"total-amount d-flex justify-content-between mb-4",children:[(0,m.jsx)("span",{children:"Total Tax Rate:"}),(0,m.jsx)("strong",{children:N.totalTax})]}),(0,m.jsxs)("div",{className:"total-amount d-flex justify-content-between mb-4",children:[(0,m.jsx)("span",{children:"Grand Total Amount:"}),(0,m.jsx)("strong",{children:N.grandTotalAmount})]}),(0,m.jsxs)("div",{className:"additional-info",children:[(0,m.jsx)("label",{children:"Additional Info"}),(0,m.jsx)("input",{type:"text",value:N.additionalInfo,onChange:e=>p("additionalInfo",e.target.value)})]}),(0,m.jsxs)("div",{className:"contact-details",children:[(0,m.jsx)("label",{children:"Contact Details"}),(0,m.jsx)("input",{type:"text",value:N.contactDetails,onChange:e=>p("contactDetails",e.target.value)})]}),(0,m.jsx)("div",{className:"d-flex justify-content-end projects",children:(0,m.jsx)("button",{onClick:()=>i?f():T(),children:i?"Update Invoice":"Create Invoice"})})]})};var h=n(8980),x=n(1063);const D=function(e){let{invoiceList:a,setInvoiceList:n,jwt:o,setUpdateData:i,currencyExchange:d,setCurrencyExchange:u}=e;const[D,N]=(0,t.useState)([]);(0,t.useEffect)((()=>{N(a)}),[a]);const j=(e,a)=>e.toLocaleString("en-US",{style:"currency",currency:a||"USD"})||e,v=async e=>{const a=await(async e=>{const a={"Content-Type":"application/json",Authorization:e.jwt};let n=s.ADMIN_API_URL+"invoice/".concat(e.id),t={method:"DELETE",mode:"cors",headers:a};try{const e=await(await fetch(n,t)).json();if("deleted successfully"===e.status)return r(e.status),e.data;if("token_expire"===e.status)return(0,c.Z)(),!1;for(const a of e.errors)r(a.msg,!0);return!1}catch(o){return r("no such invoice found to delete",!0),console.log(o),!1}})({jwt:o,id:e});a&&n((e=>{const n=e.filter((e=>e.invoiceNo!==a.invoiceNo));return[...n]}))},S=async e=>{await(async e=>{const a={"Content-Type":"application/json",Authorization:e.jwt};let n=s.ADMIN_API_URL+"invoice/pdf/".concat(e.id),t={method:"GET",mode:"cors",headers:a};try{return await fetch(n,t)}catch(o){return r("no such invoice found to delete",!0),console.log(o),!1}})({jwt:o,id:e})};return(0,m.jsxs)("div",{className:"invoice-container heightFixR",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,m.jsx)("h2",{children:"Invoice List"}),(0,m.jsxs)("div",{className:"currency-info",children:[(0,m.jsx)("label",{children:"Exchange Currency"}),(0,m.jsx)("select",{className:"form-control form-select",value:d.mainCurrencyCode,onChange:e=>u({...d,mainCurrencyCode:e.target.value}),children:l.map((e=>(0,m.jsx)("option",{value:e.code,children:e.name},e.code)))})]})]}),(0,m.jsx)("div",{children:(0,m.jsxs)(h.w,{value:D,scrollable:!0,scrollHeight:"1100px",className:"mt-3",paginator:!0,rows:11,dataKey:"invoiceNo",children:[(0,m.jsx)(x.s,{field:"invoiceNo",filterField:"invoiceNo",header:"Invoice No",filter:!0,filterPlaceholder:"Search by Invoice No",style:{minWidth:"180px",backgroundColor:"#fff"},frozen:!0}),(0,m.jsx)(x.s,{field:"invoiceTitle",header:"Invoice Title",filter:!0,filterPlaceholder:"Search by Invoice Title",style:{minWidth:"140px"}}),(0,m.jsx)(x.s,{field:"invoiceDate",header:"Invoice Date",style:{minWidth:"150px"}}),(0,m.jsx)(x.s,{field:"dueDate",header:"Due Date",style:{minWidth:"150px"}}),(0,m.jsx)(x.s,{field:"businessName",header:"Business Name",style:{minWidth:"150px"}}),(0,m.jsx)(x.s,{field:"clientName",header:"Client Name",style:{minWidth:"180px"}}),(0,m.jsx)(x.s,{sortable:!0,field:"currency",header:"Currency",filter:!0,filterPlaceholder:"Search by Invoice Title",style:{minWidth:"120px"}}),(0,m.jsx)(x.s,{sortable:!0,field:"totalAmount",header:"Total Amount",style:{minWidth:"160px"},alignFrozen:"right"}),(0,m.jsx)(x.s,{sortable:!0,field:"totalTax",header:"Total Tax",style:{minWidth:"130px"},alignFrozen:"right"}),(0,m.jsx)(x.s,{field:"grandTotalAmount",header:"Grand Total Amount",body:e=>(0,m.jsx)("span",{className:"font-bold",children:j(e.grandTotalAmount,e.currency)}),style:{minWidth:"200px"},alignFrozen:"right"}),(0,m.jsx)(x.s,{sortable:!0,field:"grandTotalAmountConverted",header:"Grand Total (in ".concat(d.mainCurrencyCode,")"),body:e=>(0,m.jsx)("span",{className:"font-bold",children:j(e.grandTotalAmountConverted,d.mainCurrencyCode)}),style:{minWidth:"200px"},alignFrozen:"right"}),(0,m.jsx)(x.s,{body:e=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"font-bold pointerS",onClick:()=>{S(e._id)},children:"Print"}),"\xa0",(0,m.jsx)("span",{className:"font-bold",onClick:()=>{i(e)},children:"Edit"}),"\xa0",(0,m.jsx)("span",{className:"font-bold pointerS",onClick:()=>{v(e._id)},children:"Delete"})]}),header:"Actions",headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:{textAlign:"center"}})]})})]})};const N=function(e){const a=e.jwt,[n,o]=(0,t.useState)(null),[i,l]=(0,t.useState)({mainCurrencyCode:"",currencies:[]}),[d,h]=(0,t.useState)([]),x=async e=>{const n=await(async e=>{const a={"Content-Type":"application/json",Authorization:e.jwt},n=e.unit?"?unit=".concat(e.unit):"";let t=s.ADMIN_API_URL+"invoice"+n,o={method:"GET",mode:"cors",headers:a};try{const e=await(await fetch(t,o)).json();if("success"===e.status)return e.data;if("token_expire"===e.status)return(0,c.Z)(),!1;for(const a of e.errors)r(a.msg,!0);return!1}catch(i){return r("no invoices found",!0),console.log(i),!1}})({jwt:a,unit:e});h(n)},N=async e=>{const a=await(async e=>{let a=e?"?unit=".concat(e):"",n=s.BASE_URL+"getCurrencyRates"+a,t={method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}};try{const e=await(await fetch(n,t)).json();if("success"===e.status)return{currencies:e.currency.currencies,mainCurrencyCode:e.currency.mainCurrencyCode};for(const a of e.errors)r(a.msg,!0)}catch(o){console.log(o)}})(e);l((e=>({currencies:a.currencies,mainCurrencyCode:a.mainCurrencyCode})))};return(0,t.useEffect)((()=>{N(),x()}),[]),(0,t.useEffect)((()=>{N(i.mainCurrencyCode),x(i.mainCurrencyCode)}),[i.mainCurrencyCode]),(0,m.jsx)("div",{className:"page-section p-4",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-xl-4 col-lg-5 col-md-12 col-12",children:(0,m.jsx)(u,{setInvoiceList:h,jwt:a,updateData:n,setUpdateData:o,currencyExchange:i})}),(0,m.jsx)("div",{className:"col-xl-8 col-lg-7 col-md-12 col-12",children:(0,m.jsx)(D,{invoiceList:d,setInvoiceList:h,jwt:a,setUpdateData:o,currencyExchange:i,setCurrencyExchange:l})})]})})}}}]);
//# sourceMappingURL=28.29801287.chunk.js.map